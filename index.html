<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Couple Goals Vault ‚ú®</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;500;700&family=Nunito:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="libs/chart.js"></script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="aurora">
      <span></span>
      <span></span>
      <span></span>
    </div>
    <div class="page">
      <header class="hero">
        <div class="logo">
          <div class="heart"></div>
          <div class="sparkle"></div>
        </div>
        <div>
          <p class="eyebrow">Together we stack dreamy coins ‚ú®</p>
          <h1 id="hero-title">Couple Goals</h1>
          <p class="subhead">
            A playful, vibrant dashboard where both of us can see wins, set new
            goals, and compare how badly we are depositing money.
          </p>
        </div>
        <div class="hero-card">
          <div class="pill">Live love budget</div>
          <h2 id="total-balance">$ 0</h2>
          <p class="muted">Total stash balance</p>
          <div class="couple">
            <button class="tag active" data-partner="Taah">Taah</button>
            <button class="tag" data-partner="Panah">Panah</button>
          </div>
        </div>
      </header>

      <section class="panel graph-section">
        <div class="panel-header">
          <h3>üìà Progress Tracker</h3>
          <p class="muted">Watch the lines climb to the top!</p>
        </div>
        <!-- New: graph filters: toggles to show/hide goals on the chart -->
        <div id="graph-filters" class="graph-filters" aria-label="Graph filters"></div>
        <div class="chart-container">
          <canvas id="progressChart"></canvas>
        </div>
        <div id="sassy-comment" class="sassy-box">
          <!-- TypeIt will animate sassy messages here for every 10% threshold per goal -->
        </div>
      </section>

      <main>
        <section class="panel">
          <div class="panel-header">
            <h3>üí∏ Make a deposit</h3>
            <p class="muted">Add your contribution and watch the stash grow.</p>
          </div>
          <form id="deposit-form">
            <div class="input-row">
              <label>
                Money (USD)
                <input type="number" step="1" name="amount" placeholder="e.g. 50" required />
              </label>
              <label>
                What it's for
                <select name="goal" id="goal-select" required>
                  <!-- Options will be populated by JS, maroro should be default -->
                </select>
              </label>
            </div>
            <div class="input-row">
              <label>
                Who is putting it in
                <input type="text" name="who" id="who-input" placeholder="Your name" required />
              </label>
              <label>
                When
                <input type="date" name="when" id="when-input" required />
              </label>
            </div>
            <label>
              Note (optional)
              <input type="text" name="note" placeholder="What's this for?" />
            </label>
            <button type="submit" class="primary">Stack the Love ‚ú®</button>
          </form>
          <div class="activity" id="activity-feed"></div>
        </section>

        <section class="panel goals">
          <div class="panel-header">
            <h3>üå∏ Goal Garden</h3>
            <p class="muted">Every goal blooms with tiny wins.</p>
          </div>
          <div class="goal-list" id="goal-list"></div>
          <hr style="border: 0; border-top: 1px solid #eee2ff; margin: 10px 0;">
          <div class="add-goal">
            <h4>‚ûï Add a new goal</h4>
            <form id="goal-form" class="input-row" style="margin-top: 10px;">
              <label>
                Goal Name
                <input type="text" name="newGoalName" placeholder="e.g. Vacation" required />
              </label>
              <label>
                Target (USD)
                <input type="number" name="newGoalTarget" placeholder="1000" required />
              </label>
              <button type="submit" class="primary" style="padding: 8px 12px; align-self: end; margin-bottom: 4px;">Add to Stash</button>
            </form>
          </div>
        </section>
      </main>

      <section class="panel footer">
        <div class="footer-grid">
          <div class="footer-stats">
            <div class="stat-card">
              <span class="stat-icon">üèÜ</span>
              <div class="stat-info">
                <h4 id="footer-goals-completed">0</h4>
                <p>Goals Done</p>
              </div>
            </div>
            <div class="stat-card">
              <span class="stat-icon">üå±</span>
              <div class="stat-info">
                <h4 id="footer-goals-active">0</h4>
                <p>Growing</p>
              </div>
            </div>
            <div class="stat-card">
              <span class="stat-icon">ü§ù</span>
              <div class="stat-info">
                <h4 id="footer-top-contributor">-</h4>
                <p>Top Stacker</p>
              </div>
            </div>
          </div>
          <div class="footer-branding">
            <h3 id="footer-title">Couple Goals Vault</h3>
            <p id="footer-typeit"></p>
          </div>
        </div>
      </section>
    </div>

    <script src="libs/typeit.js"></script>
    <script src="js/data.js"></script>
    <script src="js/config.js"></script>
    <script src="libs/firebase-app.js"></script>
    <script src="libs/firebase-firestore.js"></script>
    <script src="app.js"></script>
  </body>
</html>
